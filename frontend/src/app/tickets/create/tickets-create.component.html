<div class="create-container">
  <div class="header-section">
    <h2>Registrar Nuevo Ticket</h2>
    <p class="subtitle">Complete los detalles del incidente para su atención</p>
  </div>

  <form [formGroup]="ticketForm" (ngSubmit)="registrarTicket()" class="form-grid">

    <!-- SECCIÓN 1: DETALLES DEL INCIDENTE -->
    <div class="form-section">
      <h3>Detalles del Incidente</h3>

      <div class="input-group">
        <label for="titulo">Título del Incidente <span>*</span></label>
        <input type="text" id="titulo" formControlName="titulo" placeholder="Ej: Falla en impresora de gerencia" />
      </div>

      <div class="input-group">
        <label for="descripcion">Descripción Detallada <span>*</span></label>
        <textarea id="descripcion" formControlName="descripcion" maxlength="300"
          placeholder="Describa el problema con el mayor detalle posible (Máx. 300 caracteres)" rows="4"></textarea>
      </div>

      <div class="input-group">
        <label for="idCategoria">Categoría <span>*</span></label>
        <select id="idCategoria" formControlName="idCategoria">
          <option value="">Seleccione una categoría</option>
          <option *ngFor="let cat of categorias" [value]="cat.idCategoria">
            {{ cat.nombreCategoria }}
          </option>
        </select>
      </div>
    </div>

    <!-- SECCIÓN 2: EVIDENCIA (OPCIONAL) -->
    <div class="form-section">
      <h3>Evidencia Adjunta</h3>

      <div class="upload-area">
        <label for="adjunto" class="upload-label">
          <mat-icon>cloud_upload</mat-icon>
          <span>Haga clic para adjuntar imagen o PDF</span>
          <small>(Formatos permitidos: .jpg, .png, .pdf)</small>
        </label>
        <input type="file" id="adjunto" accept=".jpg,.jpeg,.png,.pdf" (change)="onFileSelected($event)"
          class="file-input" />
      </div>

      <!-- Vista previa -->
      <div class="preview-container" *ngIf="imagenPreview">
        <p>Vista previa del archivo adjunto:</p>
        <img [src]="imagenPreview" alt="Vista previa" class="preview-img" />
      </div>
    </div>

    <!-- ACCIONES -->
    <div class="actions-bar">
      <button type="button" class="btn-cancel" (click)="ticketForm.reset()">Cancelar</button>
      <button type="submit" class="btn-save">Registrar Ticket</button>
    </div>

  </form>
</div>