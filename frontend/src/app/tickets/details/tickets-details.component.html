<div class="det-container" *ngIf="!loading && ticket">

  <!-- T√≠tulo -->
  <h2 class="det-title">Detalles del Ticket #{{ ticket.idTicket }}</h2>

  <!-- Tarjeta general -->
  <div class="det-card">

    <div class="det-row">
      <label>T√≠tulo:</label>
      <span>{{ ticket.tituloTicket }}</span>
    </div>

    <div class="det-row">
      <label>Descripci√≥n:</label>
      <span>{{ ticket.descTicket }}</span>
    </div>

    <div class="det-row">
      <label>Estado:</label>
      <span class="estado" [ngClass]="{
        'st-nuevo': ticket.idEstado === 1,
        'st-abierto': ticket.idEstado === 2,
        'st-pendiente': ticket.idEstado === 3,
        'st-resuelto': ticket.idEstado === 4,
        'st-cerrado': ticket.idEstado === 0
      }">{{ estadoNombre(ticket.idEstado) }}</span>
    </div>

    <div class="det-row">
      <label>Usuario creador:</label>
      <span>{{ ticket.nombreUsuario }} {{ ticket.apellidoUsuario }}</span>
    </div>

    <div class="det-row">
      <label>T√©cnico asignado:</label>
      <span>{{ ticket.nombreTecnico ? ticket.nombreTecnico + ' ' + ticket.apellidoTecnico : 'Sin asignar' }}</span>
    </div>

    <div class="det-row">
      <label>Categor√≠a:</label>
      <span>{{ ticket.nombreCategoria }}</span>
    </div>

    <div class="det-row">
      <label>Prioridad:</label>
      <span class="prioridad">{{ ticket.nombrePrioridad }}</span>
    </div>

    <div class="det-row">
      <label>Fecha creaci√≥n:</label>
      <span>{{ ticket.fechaCreacion | date:'dd/MM/yyyy HH:mm' }}</span>
    </div>

  </div>

  <!-- Herramientas -->
  <div class="det-card">
    <h3>Herramientas usadas</h3>

    <div *ngIf="herramientas.length > 0; else sinHerram">
      <ul class="herr-list">
        <li *ngFor="let h of herramientas">üõ† {{ h }}</li>
      </ul>
    </div>

    <ng-template #sinHerram>
      <p class="no-herr">No se registraron herramientas.</p>
    </ng-template>
  </div>

  <!-- Acciones de estado -->
  <div class="acciones">
    <button class="btn pend" (click)="cambiarEstado(3)">Pendiente</button>
    <button class="btn res" (click)="cambiarEstado(4)">Resuelto</button>
    <button class="btn cerr" (click)="cambiarEstado(0)">Cerrado</button>
  </div>

  <!-- Volver -->
  <button class="btn-volver" (click)="volver()">‚¨Ö Volver</button>

</div>

<div *ngIf="loading" class="loading">
  Cargando ticket...
</div>
