<div class="layout">
  <main class="dashboard-container">
  
    <h2 class="titulo">Panel de Control</h2>

    <!-- TARJETAS PRINCIPALES -->
    <div class="stats-grid">
      <div class="stat-card azul">
        <h3>Tickets Nuevos</h3>
        <p>{{ resumen.nuevos }}</p>
      </div>

      <div class="stat-card verde">
        <h3>Tiempo promedio de solución</h3>
        <p>{{ resumen.promedioSolucion }}</p>
      </div>

      <div class="stat-card morado">
        <h3>Tickets resueltos hoy</h3>
        <p>{{ resumen.resueltosHoy }}</p>
      </div>

      <div class="stat-card gris">
        <h3>Total de Tickets</h3>
        <p>{{ resumen.total }}</p>
      </div>
    </div>

    <!-- GRÁFICOS -->
    <div class="charts-grid">
      <div class="chart-card">
        <h4>Tickets por Estado</h4>
        <canvas *ngIf="pieChartData"
          baseChart
          [data]="pieChartData"
          [options]="pieChartOptions"
          [type]="'pie'">
        </canvas>
      </div>

      <div class="chart-card">
        <h4>Evolución de Tickets por Mes</h4>
        <canvas *ngIf="lineChartData && lineChartData.datasets && lineChartData.datasets.length > 0"
          baseChart
          [data]="lineChartData"
          [options]="lineChartOptions"
          [type]="'line'">
        </canvas>
      </div>
    </div>

    <!-- Botón de reporte (solo admin) -->
    <div class="text-center mt-4">
      <button *ngIf="authService.tieneRol('admin')" 
              class="btn btn-primary" 
              (click)="hacerReporte()"
              style="padding: 8px 16px; background-color: #2563eb; color: white; border: none; border-radius: 4px; cursor: pointer;">
        Generar Reporte
      </button>
    </div>
  </main>
</div>
